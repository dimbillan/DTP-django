<script type="text/javascript">
  $(document).ready(function () {
    $("#id_university").change(function () {
      var url = "{% url 'accounts:ajax_load_faculties' %}";
      var universityId = $(this).val();

      $.ajax({
        url: url,
        data: {
          'university': universityId
        },
        success: function (data) {
          $("#id_faculty").html('<option value="">Fakülte seçiniz</option>');
          $("#id_department").html('<option value="">Bölüm seçiniz</option>'); // temizle
          $.each(data, function (key, value) {
            $("#id_faculty").append('<option value="' + value.id + '">' + value.name + '</option>');
          });
        }
      });
    });

    $("#id_faculty").change(function () {
      var url = "{% url 'accounts:ajax_load_departments' %}";
      var facultyId = $(this).val();

      $.ajax({
        url: url,
        data: {
          'faculty': facultyId
        },
        success: function (data) {
          $("#id_department").html('<option value="">Bölüm seçiniz</option>');
          $.each(data, function (key, value) {
            $("#id_department").append('<option value="' + value.id + '">' + value.name + '</option>');
          });
        }
      });
    });
  });
</script>